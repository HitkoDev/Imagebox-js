!function(i){function t(t){if(0>t||t>=E.length)return!1;g(),P=N=!0,W=E[t],O=W.index,H.src=W.url,i(I).html(W.title),i(A).html((E.length>1&&j.lang.counter||"").replace(/{x}/,W.index+1+"").replace(/{y}/,E.length+""));var n={top:(W.origin?-(i(f).innerHeight()/2-W.origin.y):0)+"px",left:(W.origin?-(i(f).innerWidth()/2-W.origin.x):0)+"px"};W.origin=void 0;var e={top:"0px",left:"0px"};i(m).css(n),i([f,p]).toggleClass("visible",!0),i(f).toggleClass("animating",!0),i(k).toggleClass("visible",!1);var o=m.animate([n,e],j.animation);return i(m).css(e),Q.push(o),!1}function n(){i(K).html(j.lang.close),i([p,S]).attr("title",j.lang.close),i(j.root).append([p,f]),i(y).attr("title",j.lang.prev),i(C).attr("title",j.lang.next),i(m).css("padding",j.padding),i(x).toggleClass("loading",!0),i(x).css("background-image",""),i(w).css("opacity",0),i([y,C]).hide(),i(document).on("keydown",d),h(j.root)}function e(){if(!P)return!1;var n=l(),e=s();n>=0?(i(y).show(),L.src=E[n].url):i(y).hide(),e>=0?(i(C).show(),z.src=E[e].url):i(C).hide(),i(w).css({"background-image":"url('"+H.src+"')",opacity:0}),h(j.root);var o=w.animate([{opacity:0},{opacity:1}],j.animation);return i(w).css("opacity",1),o.addEventListener("finish",function(){i(x).toggleClass("loading",!1),i(x).css("background-image","url('"+H.src+"')")}),Q.push(o),u(c(H.width,H.height,!0).width,function(){var n=k.animate([{"max-height":"0px"},{"max-height":"200px"}],j.animation);i(k).toggleClass("visible",!0),n.addEventListener("finish",function(){O!=W.index&&0>B?t(O):(N=!1,i(f).toggleClass("animating",!1))}),Q.push(n)}),!1}function o(){return O=l(),0>O&&(O=0),a(),!1}function r(){return O=s(),0>O&&(O=E.length-1),a(),!1}function a(){clearTimeout(B),B=setTimeout(function(){B=-1,N||O==W.index||t(O)},j.doubleClickTimeout)}function l(){return(O||(j.loop?E.length:0))-1}function s(){return(O+1)%E.length||(j.loop?0:-1)}function d(t){var n=t.which;return i.inArray(n,j.closeKeys)>=0?i.ibClose():i.inArray(n,j.nextKeys)>=0?r():i.inArray(n,j.prevKeys)>=0?o():!0}function g(){P=!1,H.src=L.src=z.src="";for(var i=0;i<Q.length;i++)Q[i].cancel();Q=[]}function c(t,n,e){var o=t,r=n;t+2*j.padding>i(f).innerWidth()&&(t=i(f).innerWidth()-2*j.padding),n=r*t/o,n+2*j.padding>i(f).innerHeight()&&(n=i(f).innerHeight()-2*j.padding),t=n*o/r;var a=100*n/t,l={"padding-bottom":a+"%"};if(e){var s={"padding-bottom":i(v).css("padding-bottom")},d=v.animate([s,l],j.animation);i(v).css(l),Q.push(d)}else i(v).css(l);return{width:t,height:n}}function u(t,n){t+=2*j.padding;var e=m.animate([{"max-width":i(m).css("max-width")},{"max-width":t+"px"}],j.animation);i(m).css("max-width",t),e.addEventListener("finish",function(){"function"==typeof n&&n()}),Q.push(e)}function h(t){var n=i(f).position(),e=i(f).offset(),o=i("html").offset();i(t)[0]!=i("body")[0]&&(n.top+=i(t).scrollTop(),n.left+=i(t).scrollLeft()),i(f).css({top:n.top+o.top+window.scrollY-e.top,left:n.left+o.left+window.scrollX-e.left})}var p,f,m,b,v,x,w,y,C,k,T,S,A,I,K,W,B,H=new Image,L=new Image,z=new Image,E=[],R=i(window),j={},N=!1,P=!1,O=-1,Q=[],X={initialSize:200,lang:{close:"Close",prev:"Previous",next:"Next",counter:"Image {x} of {y}"},padding:30,closeKeys:[27,88,67],prevKeys:[37,80],nextKeys:[39,78],loop:!1,doubleClickTimeout:200,root:i("body")[0],animation:{duration:600,iterations:1,delay:0,easing:"ease-in-out"}};i.fn.imagebox=function(t,n,e){n=n||function(i,t){var n={url:i.getAttribute("href")||void 0,title:i.getAttribute("title")||void 0,index:t};return n},e=e||function(i,t){return!0};var o=this;return o.unbind("click").click(function(r){for(var a=this,l=0,s=[],d=0;d<o.length;d++)e.call(a,o[d],d)&&o[d]==a&&(l=d),s.push(n(o[d],d));return s[l].origin={target:a},i.imagebox(s,l,t)})},i.imagebox=function(e,o,r){if(i.extend(j,X,r),E=e,n(),e[o].origin&&e[o].origin.target){var a=e[o].origin.target,l=i(i(a).find(i(a).attr("data-target"))[0]||a),s=f.getBoundingClientRect(),d=l[0].getBoundingClientRect();l.toggleClass("ib-line-fix",!0),e[o].origin.x=e[o].origin.x||d.left-s.left+l.innerWidth()/2,e[o].origin.y=e[o].origin.y||d.top-s.top+l.innerHeight()/2,e[o].origin.width=e[o].origin.width||l.innerWidth(),e[o].origin.height=e[o].origin.height||l.innerHeight(),l.toggleClass("ib-line-fix",!1)}return i(m).css("max-width",c(e[o].origin?e[o].origin.width:j.initialSize,e[o].origin?e[o].origin.height:j.initialSize,!1).width+2*j.padding),t(o),!1},i.ibClose=function(){return g(),i([f,k,p]).toggleClass("visible",!1),i(f).toggleClass("animating",!1),W&&(W=void 0),i(document).off("keydown",d),!1},i(window).on("load",function(){i(X.root).append(i([p=i('<div id="ibOverlay" />').click(i.ibClose)[0],f=i('<div id="ibWrap" />')[0]])),m=i('<div id="ibCenter" />').appendTo(f)[0],b=i('<div id="ibContent" />').appendTo(m).append([v=i('<div id="ibResponsive" />').append([x=i('<div id="ibBgImage" />')[0],w=i('<div id="ibImage" />')[0],y=i('<div id="ibPrev" class="ibScrim ibScrim-left ibScrim-20"><i class="ib-icon-prev"></i></div>').on("click",o)[0],C=i('<div id="ibNext" class="ibScrim ibScrim-right ibScrim-20"><i class="ib-icon-next"></i></div>').on("click",r)[0]])[0],k=i('<div id="ibBottomContainer" />')[0]])[0],T=i('<div id="ibBottom" />').appendTo(k).append([S=i('<a id="ibCloseLink" href="#" ><span id="ibCloseText"></span><i class="ib-icon-close"></i></a>').click(i.ibClose)[0],A=i('<small id="ibCounter" />')[0],I=i('<strong id="ibCaption" />')[0]])[0],K=i(T).find("#ibCloseText")[0],i(H).on("load",e),R.on("resize",function(){W&&u(c(H.width,H.height,!1).width)});var t=i(".mdl-layout.mdl-js-layout")[0];t||(t=i("body")[0]),i("a[rel^='lightbox']").imagebox({root:t},null,function(i){return this==i||this.getAttribute("rel").length>8&&this.getAttribute("rel")==i.getAttribute("rel")})})}(jQuery);
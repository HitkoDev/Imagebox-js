!function(i){function n(n){if(0>n||n>=H.length)return!1;g(),N=j=!0,I=H[n],P=I.index,W.src=I.url,i(A).html(I.title),i(S).html((H.length>1&&R.lang.counter||"").replace(/{x}/,I.index+1+"").replace(/{y}/,H.length+""));var t={top:(I.origin?-(i(p).innerHeight()/2-I.origin.y):0)+"px",left:(I.origin?-(i(p).innerWidth()/2-I.origin.x):0)+"px"};I.origin=void 0;var e={top:"0px",left:"0px"};i(f).css(t),i([p,h]).toggleClass("visible",!0),i(p).toggleClass("animating",!0),i(w).toggleClass("visible",!1);var o=f.animate([t,e],R.animation);return o.addEventListener("finish",function(){i(f).css(e)}),O.push(o),!1}function t(){i(L).html(R.lang.close),i([h,T]).attr("title",R.lang.close),i(R.root).append([h,p]),i(y).attr("title",R.lang.prev),i(C).attr("title",R.lang.next),i(f).css("padding",R.padding),i(v).toggleClass("loading",!0),i(v).css("background-image",""),i(x).css("opacity",0),i([y,C]).hide(),i(document).on("keydown",d),i(p).css({top:i(R.root).scrollTop(),left:i(R.root).scrollLeft()})}function e(){if(!N)return!1;var t=s(),e=l();t>=0?(i(y).show(),B.src=H[t].url):i(y).hide(),e>=0?(i(C).show(),E.src=H[e].url):i(C).hide(),i(x).css({"background-image":"url('"+W.src+"')",opacity:0}),i(p).css({top:i(R.root).scrollTop(),left:i(R.root).scrollLeft()});var o=x.animate([{opacity:0},{opacity:1}],R.animation);return o.addEventListener("finish",function(){i(x).css("opacity",1),i(v).toggleClass("loading",!1),i(v).css("background-image","url('"+W.src+"')")}),O.push(o),u(c(W.width,W.height,!0).width,function(){var t=w.animate([{"max-height":"0px"},{"max-height":"200px"}],R.animation);t.addEventListener("finish",function(){i(w).toggleClass("visible",!0),P!=I.index&&0>K?n(P):(j=!1,i(p).toggleClass("animating",!1))}),O.push(t)}),!1}function o(){return P=s(),0>P&&(P=0),a(),!1}function r(){return P=l(),0>P&&(P=H.length-1),a(),!1}function a(){clearTimeout(K),K=setTimeout(function(){K=-1,j||P==I.index||n(P)},R.doubleClickTimeout)}function s(){return(P||(R.loop?H.length:0))-1}function l(){return(P+1)%H.length||(R.loop?0:-1)}function d(n){var t=n.which;return i.inArray(t,R.closeKeys)>=0?i.ibClose():i.inArray(t,R.nextKeys)>=0?r():i.inArray(t,R.prevKeys)>=0?o():!0}function g(){N=!1,W.src=B.src=E.src="";for(var i=0;i<O.length;i++)O[i].cancel();O=[]}function c(n,t,e){var o=n,r=t;n+2*R.padding>i(p).innerWidth()&&(n=i(p).innerWidth()-2*R.padding),t=r*n/o,t+2*R.padding>i(p).innerHeight()&&(t=i(p).innerHeight()-2*R.padding),n=t*o/r;var a=100*t/n,s={"padding-bottom":a+"%"};if(e){var l={"padding-bottom":i(b).css("padding-bottom")},d=b.animate([l,s],R.animation);d.addEventListener("finish",function(){i(b).css(s)}),O.push(d)}else i(b).css(s);return{width:n,height:t}}function u(n,t){n+=2*R.padding;var e=f.animate([{"max-width":i(f).css("max-width")},{"max-width":n+"px"}],R.animation);e.addEventListener("finish",function(){i(f).css("max-width",n),"function"==typeof t&&t()}),O.push(e)}var h,p,f,m,b,v,x,y,C,w,k,T,S,A,L,I,K,W=new Image,B=new Image,E=new Image,H=[],z=i(window),R={},j=!1,N=!1,P=-1,O=[],Q={initialSize:200,lang:{close:"Close",prev:"Previous",next:"Next",counter:"Image {x} of {y}"},padding:30,closeKeys:[27,88,67],prevKeys:[37,80],nextKeys:[39,78],loop:!1,doubleClickTimeout:200,root:i("body")[0],animation:{duration:600,iterations:1,delay:0,easing:"ease-in-out"}};i.fn.imagebox=function(n,t,e){t=t||function(i,n){var t={url:i.getAttribute("href")||void 0,title:i.getAttribute("title")||void 0,index:n};return t},e=e||function(i,n){return!0};var o=this;return o.unbind("click").click(function(r){for(var a=this,s=0,l=[],d=0;d<o.length;d++)e.call(a,o[d],d)&&o[d]==a&&(s=d),l.push(t(o[d],d));return l[s].origin={target:a},i.imagebox(l,s,n)})},i.imagebox=function(e,o,r){if(i.extend(R,Q,r),H=e,t(),e[o].origin&&e[o].origin.target){var a=e[o].origin.target,s=i(i(a).find(i(a).attr("data-target"))[0]||a),l=p.getBoundingClientRect(),d=s[0].getBoundingClientRect();s.toggleClass("ib-line-fix",!0),e[o].origin.x=e[o].origin.x||d.left-l.left+s.innerWidth()/2,e[o].origin.y=e[o].origin.y||d.top-l.top+s.innerHeight()/2,e[o].origin.width=e[o].origin.width||s.innerWidth(),e[o].origin.height=e[o].origin.height||s.innerHeight(),s.toggleClass("ib-line-fix",!1)}return i(f).css("max-width",c(e[o].origin?e[o].origin.width:R.initialSize,e[o].origin?e[o].origin.height:R.initialSize,!1).width+2*R.padding),n(o),!1},i.ibClose=function(){return g(),i([p,w,h]).toggleClass("visible",!1),i(p).toggleClass("animating",!1),I&&(I=void 0),i(document).off("keydown",d),!1},i(window).on("load",function(){i(Q.root).append(i([h=i('<div id="ibOverlay" />').click(i.ibClose)[0],p=i('<div id="ibWrap" />')[0]])),f=i('<div id="ibCenter" />').appendTo(p)[0],m=i('<div id="ibContent" />').appendTo(f).append([b=i('<div id="ibResponsive" />').append([v=i('<div id="ibBgImage" />')[0],x=i('<div id="ibImage" />')[0],y=i('<div id="ibPrev" class="ibScrim ibScrim-left ibScrim-20"><i class="ib-icon-prev"></i></div>').on("click",o)[0],C=i('<div id="ibNext" class="ibScrim ibScrim-right ibScrim-20"><i class="ib-icon-next"></i></div>').on("click",r)[0]])[0],w=i('<div id="ibBottomContainer" />')[0]])[0],k=i('<div id="ibBottom" />').appendTo(w).append([T=i('<a id="ibCloseLink" href="#" ><span id="ibCloseText"></span><i class="ib-icon-close"></i></a>').click(i.ibClose)[0],S=i('<small id="ibCounter" />')[0],A=i('<strong id="ibCaption" />')[0]])[0],L=i(k).find("#ibCloseText")[0],i(W).on("load",e),z.on("resize",function(){I&&u(c(W.width,W.height,!1).width)});var n=i(".mdl-layout.mdl-js-layout")[0];n||(n=i("body")[0]),i("a[rel^='lightbox']").imagebox({root:n},null,function(i){return this==i||this.getAttribute("rel").length>8&&this.getAttribute("rel")==i.getAttribute("rel")})})}(jQuery);
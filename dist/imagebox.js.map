{"version":3,"sources":["imagebox.ts"],"names":[],"mappings":"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","file":"imagebox.js","sourcesContent":["/// <reference path=\"jquery.d.ts\" />\r\n\r\ninterface ibOptions {\r\n    initialSize?: number,\r\n    lang?: {\r\n        close?: string,\r\n        prev?: string,\r\n        next?: string,\r\n        counter?: string\r\n    },\r\n    padding?: number,\r\n    closeKeys?: Array<number>,\r\n    prevKeys?: Array<number>,\r\n    nextKeys?: Array<number>,\r\n    doubleClickTimeout?: number,\r\n    loop?: boolean,\r\n    root?: HTMLElement,\r\n    animation?: {\r\n        duration?: number,\r\n        iterations?: number,\r\n        delay?: number,\r\n        easing?: string\r\n    }\r\n}\r\n\r\ninterface ibImage {\r\n    url: string,\r\n    title: string,\r\n    index: number,\r\n    origin?: ibOrigin\r\n}\r\n\r\ninterface ibOrigin {\r\n    x?: number,\r\n    y?: number,\r\n    width?: number,\r\n    height?: number,\r\n    target: HTMLElement\r\n}\r\n\r\ninterface ibSize {\r\n    width: number,\r\n    height: number\r\n}\r\n\r\ninterface JQuery {\r\n    imagebox(_options: ibOptions, linkMapper?: (el: HTMLElement, i: number) => ibImage, linksFilter?: (el: HTMLElement, i: number) => boolean): JQuery;\r\n}\r\n\r\ninterface JQueryStatic {\r\n    imagebox(_images: Array<ibImage>, startImage: number, _options: ibOptions): boolean;\r\n    ibClose(): boolean;\r\n}\r\n\r\ninterface webAnimation {\r\n    addEventListener(event: string, callback: Function): void,\r\n    cancel(): void,\r\n}\r\n\r\ninterface HTMLDivElement {\r\n    animate(a: any, b: any): webAnimation\r\n}\r\n\r\n(function($: JQueryStatic) {\r\n\r\n    var\r\n        overlay: HTMLDivElement,\r\n        wrap: HTMLDivElement,\r\n        center: HTMLDivElement,\r\n        content: HTMLDivElement,\r\n        responsive: HTMLDivElement,\r\n        bgImage: HTMLDivElement,\r\n        image: HTMLDivElement,\r\n        prev: HTMLDivElement,\r\n        next: HTMLDivElement,\r\n        bottomContainer: HTMLDivElement,\r\n        bottom: HTMLDivElement,\r\n        close: HTMLLinkElement,\r\n        counter: HTMLElement,\r\n        caption: HTMLElement,\r\n        closeText: HTMLSpanElement,\r\n\r\n        img: HTMLImageElement = new Image(),\r\n        preloadP: HTMLImageElement = new Image(),\r\n        preloadN: HTMLImageElement = new Image(),\r\n\r\n        images: Array<ibImage> = [],\r\n        win = $(window),\r\n        options: ibOptions = {},\r\n        activeImage: ibImage,\r\n        changing: boolean = false,\r\n        open: boolean = false,\r\n        queued: number = -1,\r\n        animations: Array<webAnimation> = [],\r\n        timeout: number,\r\n\r\n        defaults: ibOptions = {\r\n            initialSize: 200,\r\n            lang: {\r\n                close: 'Close',\r\n                prev: 'Previous',\r\n                next: 'Next',\r\n                counter: 'Image {x} of {y}'\r\n            },\r\n            padding: 30,\r\n            closeKeys: [27, 88, 67],\r\n            prevKeys: [37, 80],\r\n            nextKeys: [39, 78],\r\n            loop: false,\r\n            doubleClickTimeout: 200,\r\n            root: $(\"body\")[0],\r\n            animation: {\r\n                duration: 600,\r\n                iterations: 1,\r\n                delay: 0,\r\n                easing: 'ease-in-out'\r\n            }\r\n        };\r\n\r\n    $.fn.imagebox = function(_options: ibOptions, linkMapper?: (el: HTMLElement, i: number) => ibImage, linksFilter?: (el: HTMLElement, i: number) => boolean) {\r\n        linkMapper = linkMapper || function(el: HTMLElement, i: number): ibImage {\r\n            var im: ibImage = {\r\n                url: el.getAttribute(\"href\") || undefined,\r\n                title: el.getAttribute(\"title\") || undefined,\r\n                index: i\r\n            };\r\n            return im;\r\n        };\r\n        linksFilter = linksFilter || function(el: HTMLElement, i: number): boolean {\r\n            return true;\r\n        };\r\n\r\n        var links = this;\r\n\r\n        return links.unbind(\"click\").click(function(evt) {\r\n\r\n            var link = this,\r\n                startIndex: number = 0,\r\n                filteredLinks: Array<ibImage> = [];\r\n\r\n            for (var i = 0; i < links.length; i++) {\r\n                if (linksFilter.call(link, links[i], i)) {\r\n                    if (links[i] == link) startIndex = i;\r\n                }\r\n                filteredLinks.push(linkMapper(links[i], i));\r\n            }\r\n\r\n            filteredLinks[startIndex].origin = {\r\n                target: link\r\n            };\r\n\r\n            return $.imagebox(filteredLinks, startIndex, _options);\r\n        });\r\n\r\n    }\r\n\r\n    $.imagebox = function(_images: Array<ibImage>, startImage: number, _options: ibOptions) {\r\n        $.extend(options, defaults, _options);\r\n        images = _images;\r\n        setup();\r\n\r\n        if (_images[startImage].origin && _images[startImage].origin.target) {\r\n            var link = _images[startImage].origin.target;\r\n            var target = $($(link).find($(link).attr(\"data-target\"))[0] || link);\r\n\r\n            var bw = wrap.getBoundingClientRect();\r\n            var bt = target[0].getBoundingClientRect();\r\n\r\n            target.toggleClass('ib-line-fix', true);\r\n            _images[startImage].origin.x = _images[startImage].origin.x || (bt.left - bw.left + target.innerWidth() / 2);\r\n            _images[startImage].origin.y = _images[startImage].origin.y || (bt.top - bw.top + target.innerHeight() / 2);\r\n            _images[startImage].origin.width = _images[startImage].origin.width || target.innerWidth();\r\n            _images[startImage].origin.height = _images[startImage].origin.height || target.innerHeight();\r\n            target.toggleClass('ib-line-fix', false);\r\n        }\r\n\r\n        $(center).css('max-width', getMaxSize(_images[startImage].origin ? _images[startImage].origin.width : options.initialSize, _images[startImage].origin ? _images[startImage].origin.height : options.initialSize, false).width + 2 * options.padding);\r\n        changeImage(startImage);\r\n        return false;\r\n    };\r\n\r\n    $.ibClose = function(): boolean {\r\n        stop();\r\n        $([wrap, bottomContainer, overlay]).toggleClass('visible', false);\r\n        $(wrap).toggleClass('animating', false);\r\n        if (activeImage) activeImage = undefined;\r\n        $(document).off(\"keydown\", keyDown);\r\n        return false;\r\n    }\r\n\r\n    function changeImage(i: number) {\r\n        if (i < 0 || i >= images.length) return false;\r\n\r\n        stop();\r\n        open = changing = true;\r\n\r\n        activeImage = images[i];\r\n        queued = activeImage.index;\r\n        img.src = activeImage.url;\r\n        $(caption).html(activeImage.title);\r\n        $(counter).html((((images.length > 1) && options.lang.counter) || \"\").replace(/{x}/, (activeImage.index + 1) + '').replace(/{y}/, images.length + ''));\r\n\r\n        var centerOrigin = {\r\n            top: (activeImage.origin ? -($(wrap).innerHeight() / 2 - activeImage.origin.y) : 0) + 'px',\r\n            left: (activeImage.origin ? -($(wrap).innerWidth() / 2 - activeImage.origin.x) : 0) + 'px'\r\n        };\r\n        activeImage.origin = undefined;\r\n        var centerTarget = {\r\n            top: '0px',\r\n            left: '0px'\r\n        };\r\n\r\n        $(center).css(centerOrigin);\r\n        $([wrap, overlay]).toggleClass('visible', true);\r\n        $(wrap).toggleClass('animating', true);\r\n        $(bottomContainer).toggleClass('visible', false);\r\n\r\n        var anim = center.animate([\r\n            centerOrigin, centerTarget\r\n        ], options.animation);\r\n        $(center).css(centerTarget);\r\n        animations.push(anim);\r\n\r\n        return false;\r\n    }\r\n\r\n    function setup() {\r\n        $(closeText).html(options.lang.close);\r\n        $([overlay, close]).attr('title', options.lang.close);\r\n        $(options.root).append([overlay, wrap]);\r\n        $(prev).attr('title', options.lang.prev);\r\n        $(next).attr('title', options.lang.next);\r\n        $(center).css('padding', options.padding);\r\n        $(bgImage).toggleClass('loading', true);\r\n        $(bgImage).css('background-image', '');\r\n        $(image).css('opacity', 0);\r\n        $([prev, next]).hide();\r\n        $(document).on(\"keydown\", keyDown);\r\n        setBoxPosition(options.root);\r\n    }\r\n\r\n    function showImage(): boolean {\r\n        if (!open) return false;\r\n\r\n        var px = prevIndex(), nx = nextIndex();\r\n        if (px >= 0) {\r\n            $(prev).show();\r\n            preloadP.src = images[px].url;\r\n        } else {\r\n            $(prev).hide();\r\n        }\r\n        if (nx >= 0) {\r\n            $(next).show();\r\n            preloadN.src = images[nx].url;\r\n        } else {\r\n            $(next).hide();\r\n        }\r\n\r\n        $(image).css({\r\n            'background-image': \"url('\" + img.src + \"')\",\r\n            'opacity': 0\r\n        });\r\n\r\n        setBoxPosition(options.root);\r\n\r\n        var anim: webAnimation = image.animate([{\r\n            opacity: 0\r\n        }, {\r\n                opacity: 1\r\n            }], options.animation);\r\n        $(image).css('opacity', 1);\r\n        anim.addEventListener('finish', function() {\r\n            $(bgImage).toggleClass('loading', false);\r\n            $(bgImage).css('background-image', \"url('\" + img.src + \"')\");\r\n        });\r\n        animations.push(anim);\r\n\r\n        setMaxWidth(getMaxSize(img.width, img.height, true).width, function() {\r\n            var anim = bottomContainer.animate([\r\n                { 'max-height': '0px' },\r\n                { 'max-height': '200px' }\r\n            ], options.animation);\r\n            $(bottomContainer).toggleClass('visible', true);\r\n            anim.addEventListener('finish', function() {\r\n                if (queued != activeImage.index && timeout < 0) {\r\n                    changeImage(queued);\r\n                } else {\r\n                    changing = false;\r\n                    $(wrap).toggleClass('animating', false);\r\n                }\r\n            });\r\n            animations.push(anim);\r\n        });\r\n\r\n        return false;\r\n    }\r\n\r\n    function prevImage(): boolean {\r\n        queued = prevIndex();\r\n        if (queued < 0) queued = 0;\r\n        queueChange();\r\n        return false;\r\n    }\r\n\r\n    function nextImage(): boolean {\r\n        queued = nextIndex();\r\n        if (queued < 0) queued = images.length - 1;\r\n        queueChange();\r\n        return false;\r\n    }\r\n\r\n    function queueChange() {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(function() {\r\n            timeout = -1;\r\n            if (!changing && queued != activeImage.index) changeImage(queued);\r\n        }, options.doubleClickTimeout);\r\n    }\r\n\r\n    function prevIndex() {\r\n        return (queued || (options.loop ? images.length : 0)) - 1;\r\n    }\r\n\r\n    function nextIndex() {\r\n        return ((queued + 1) % images.length) || (options.loop ? 0 : -1);\r\n    }\r\n\r\n    function keyDown(event) {\r\n        var code = event.which;\r\n        return ($.inArray(code, options.closeKeys) >= 0) ? $.ibClose() : ($.inArray(code, options.nextKeys) >= 0) ? nextImage() : ($.inArray(code, options.prevKeys) >= 0) ? prevImage() : true;\r\n    }\r\n\r\n    function stop() {\r\n        open = false;\r\n        img.src = preloadP.src = preloadN.src = '';\r\n        for (var i = 0; i < animations.length; i++) animations[i].cancel();\r\n        animations = [];\r\n    }\r\n\r\n    function getMaxSize(width: number, height: number, animate: boolean): ibSize {\r\n        var iw = width, ih = height;\r\n\r\n        if (width + 2 * options.padding > $(wrap).innerWidth()) width = $(wrap).innerWidth() - 2 * options.padding;\r\n        height = (ih * width) / iw;\r\n        if (height + 2 * options.padding > $(wrap).innerHeight()) height = $(wrap).innerHeight() - 2 * options.padding;\r\n        width = (height * iw) / ih;\r\n\r\n        var ratio = (height * 100) / width;\r\n        var target = {\r\n            'padding-bottom': ratio + '%'\r\n        };\r\n        if (animate) {\r\n            var origin = {\r\n                'padding-bottom': $(responsive).css('padding-bottom')\r\n            };\r\n            var anim: webAnimation = responsive.animate([\r\n                origin, target\r\n            ], options.animation);\r\n            $(responsive).css(target);\r\n            animations.push(anim);\r\n        } else {\r\n            $(responsive).css(target);\r\n        }\r\n\r\n        return {\r\n            width: width,\r\n            height: height\r\n        };\r\n    }\r\n\r\n    function setMaxWidth(width: number, callback?: () => any) {\r\n        width += 2 * options.padding;\r\n        var anim = center.animate([{\r\n            'max-width': $(center).css('max-width')\r\n        }, {\r\n                'max-width': width + 'px'\r\n            }], options.animation);\r\n        $(center).css('max-width', width);\r\n        anim.addEventListener('finish', function() {\r\n            if (typeof callback == 'function') callback();\r\n        });\r\n        animations.push(anim);\r\n    }\r\n\r\n    function setBoxPosition(root): void {\r\n        var pos = $(wrap).position();\r\n        var rect = $(wrap).offset();\r\n        var bdy = $('html').offset();\r\n        if ($(root)[0] != $('body')[0]) {\r\n            pos.top += $(root).scrollTop();\r\n            pos.left += $(root).scrollLeft();\r\n        }\r\n        $(wrap).css({\r\n            top: pos.top + bdy.top + window.scrollY - rect.top,\r\n            left: pos.left + bdy.left + window.scrollX - rect.left\r\n        });\r\n    }\r\n\r\n    $(window).on('load', function() {\r\n        $(defaults.root).append(\r\n            $([\r\n                overlay = <HTMLDivElement>$('<div id=\"ibOverlay\" />').click($.ibClose)[0],\r\n                wrap = <HTMLDivElement>$('<div id=\"ibWrap\" />')[0]\r\n            ])\r\n        );\r\n        center = <HTMLDivElement>$('<div id=\"ibCenter\" />').appendTo(wrap)[0];\r\n        content = <HTMLDivElement>$('<div id=\"ibContent\" />').appendTo(center).append([\r\n            responsive = <HTMLDivElement>$('<div id=\"ibResponsive\" />').append([\r\n                bgImage = <HTMLDivElement>$('<div id=\"ibBgImage\" />')[0],\r\n                image = <HTMLDivElement>$('<div id=\"ibImage\" />')[0],\r\n                prev = <HTMLDivElement>$('<div id=\"ibPrev\" class=\"ibScrim ibScrim-left ibScrim-20\"><i class=\"ib-icon-prev\"></i></div>').on('click', prevImage)[0],\r\n                next = <HTMLDivElement>$('<div id=\"ibNext\" class=\"ibScrim ibScrim-right ibScrim-20\"><i class=\"ib-icon-next\"></i></div>').on('click', nextImage)[0]\r\n            ])[0],\r\n            bottomContainer = <HTMLDivElement>$('<div id=\"ibBottomContainer\" />')[0],\r\n        ])[0];\r\n        bottom = <HTMLDivElement>$('<div id=\"ibBottom\" />').appendTo(bottomContainer).append([\r\n            close = <HTMLLinkElement>$('<a id=\"ibCloseLink\" href=\"#\" ><span id=\"ibCloseText\"></span><i class=\"ib-icon-close\"></i></a>').click($.ibClose)[0],\r\n            counter = $('<small id=\"ibCounter\" />')[0],\r\n            caption = $('<strong id=\"ibCaption\" />')[0]\r\n        ])[0];\r\n        closeText = $(bottom).find('#ibCloseText')[0];\r\n        $(img).on('load', showImage);\r\n\r\n        win.on(\"resize\", function() {\r\n            if (activeImage) setMaxWidth(getMaxSize(img.width, img.height, false).width);\r\n        });\r\n\r\n        var r = $(\".mdl-layout.mdl-js-layout\")[0];\r\n        if (!r) r = $(\"body\")[0];\r\n\r\n        $(\"a[rel^='lightbox']\").imagebox({\r\n            root: r\r\n        }, null, function(el) {\r\n            return (this == el) || ((this.getAttribute('rel').length > 8) && (this.getAttribute('rel') == el.getAttribute('rel')));\r\n        });\r\n    });\r\n\r\n})(jQuery);"],"sourceRoot":"/source/"}